{"version":3,"names":["_deleteChannel","require","_deleteMember","_deleteMessagesForChannel","_updateMessage","_updatePollMessage","_upsertChannelData","_upsertChannelDataFromChannel","_upsertChannels","_upsertMembers","_upsertMessages","_upsertReads","_QuickSqliteClient","_createSelectQuery","handleEventToSyncDB","event","client","flush","type","queriesWithChannelGuard","createQueries","_event$channel","cid","channel","channels","QuickSqliteClient","executeSql","apply","createSelectQuery","length","channel_type","channel_id","undefined","initialized","disconnected","channelQuery","upsertChannelDataFromChannel","newQueries","concat","_toConsumableArray2","executeSqlBatch","console","warn","user","id","flushOverride","upsertReads","reads","last_read","received_at","unread_messages","message","parent_id","show_in_channel","queries","upsertMessages","messages","userId","activeChannels","ownReads","state","read","unreadCount","countUnread","upsertReadsQueries","toString","updateMessage","reaction","upsertChannelData","deleteChannel","deleteMessagesForChannel","_event$queriedChannel","_event$queriedChannel2","queriedChannels","_event$queriedChannel3","_event$queriedChannel4","upsertChannels","isLatestMessagesSet","isLatestMessageSet","member","upsertMembers","members","deleteMember","includes","poll","poll_vote","updatePollMessage","eventType","userID","exports"],"sourceRoot":"../../../../../src","sources":["components/Chat/hooks/handleEventToSyncDB.ts"],"mappings":"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","ignoreList":[]}
